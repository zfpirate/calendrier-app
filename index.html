<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendrier Devoirs</title>

  <!-- Style et couleurs PWA -->
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#001f3f">
  <meta name="background-color" content="#0a0a0a">

  <!-- Favicon -->
  <link rel="icon" href="image/icone-app-192.jpg" type="image/png">

</head>
<body>

  <!-- Top bar -->
  <div id="top-bar">
    <div>
      <button id="prev-month-btn" aria-label="Mois précédent">&lt;</button>
      <span id="monthYear"></span>
      <button id="next-month-btn" aria-label="Mois suivant">&gt;</button>
    </div>
    <div>
      <button id="settings-btn">Paramètres</button>
    </div>
  </div>

  <!-- Calendrier -->
  <div id="calendar"></div>

  <!-- Modal ajout/édition de devoir -->
  <div id="modal-bg" style="display:none;">
    <div class="modal">
      <h2 id="modal-title">Ajouter un devoir</h2>
      <form id="taskForm" autocomplete="off">
        <input type="text" id="matiere" placeholder="Matière" required>
        <input type="text" id="titre" placeholder="Titre du devoir" required>
        <input type="date" id="date" required>
        <input type="time" id="heure" value="18:00" required>
        <label><input type="checkbox" id="rappel" checked> Rappel</label>
        <div class="modal-buttons">
          <button type="submit" class="save-btn">Enregistrer</button>
          <button type="button" id="cancel-btn" class="cancel-btn">Annuler</button>
          <button type="button" id="delete-btn" class="delete-btn" style="display:none;">Supprimer</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Paramètres -->
  <div id="params-bg" style="display:none;">
    <div id="params">
      <h2>Paramètres</h2>
      <form id="paramsForm" autocomplete="off">
        <label for="userId">Identifiant</label>
        <input type="text" id="userId" name="userId" placeholder="Ton ID" required>
        <label for="userPass">Mot de passe</label>
        <input type="password" id="userPass" name="userPass" placeholder="Ton mot de passe" required autocomplete="current-password">
        <label for="defaultReminder">Jours avant rappel (0 = même jour)</label>
        <input type="number" id="defaultReminder" name="defaultReminder" min="0" max="7" required>
        <label for="defaultHour">Heure par défaut du rappel</label>
        <input type="time" id="defaultHour" name="defaultHour" value="18:00" required>
        <div class="modal-buttons">
          <button type="submit" class="save-btn">Sauvegarder</button>
          <button type="button" id="params-cancel-btn" class="cancel-btn">Annuler</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Liste des devoirs du jour -->
  <div id="dayTasks-bg" style="display:none;">
    <div class="day-tasks">
      <h2 id="dayTasks-title">Devoirs</h2>
      <div id="dayTasks-list"></div>
      <div class="modal-buttons">
        <button id="dayTasks-add-btn" class="save-btn">Ajouter</button>
        <button id="dayTasks-close-btn" class="cancel-btn">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Login -->
  <div id="login-bg" style="display:none;">
    <div class="login">
      <h2>Connexion</h2>
      <input type="email" id="loginUser" placeholder="Email Firebase" autocomplete="username">
      <input type="password" id="loginPass" placeholder="Mot de passe" autocomplete="current-password">
      <button id="loginSubmit" class="save-btn">Connexion / Créer compte</button>
      <hr style="margin:15px 0; border-color:#444;">
      <button id="loginGoogle" class="save-btn">Se connecter avec Google</button>
    </div>
  </div>

  <!-- Trash -->
  <div id="trash" title="Dépose ici pour supprimer">🗑️</div>

  <!-- Librairies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script type="module" src="main.js"></script>
  <script type="module" src="client.js"></script>

</body>
</html>
